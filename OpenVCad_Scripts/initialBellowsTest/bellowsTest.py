import pyvcad as pv

materials = pv.MaterialDefs("configs/default.json")
red = materials.id("red")
blue = materials.id("blue")

#Dimensions of part
mainHeight = 3.5 #Dr. Mac's: 3.5[mm] Mine: 8
mainD = 25 #Dr. MAC's: 25[mm] Mine: 44.7159

#importing mesh
mesh =pv.Mesh("MAC_LAB/initialBellowsTest/steerable_bellows_solid.STL", red)
#mesh =pv.Mesh("MAC_LAB/initialBellowsTest/bellows_v1_heckAndrew.STL", red)

mesh = pv.Translate(-mainD/2, -mainHeight/2, -mainD/2, mesh)
mesh = pv.Rotate(90,0,0, pv.Vec3(0,0,0), mesh)

#Material gradding
fgrade = pv.FGrade(["74.2629376000001 + 40.5962349771641*cos(1*pi*r/6.25) + 10.8595046133818*sin(1*pi*r/6.25) + -17.8534381347552*cos(2*pi*r/6.25) + -10.2877544677051*sin(2*pi*r/6.25) + 1.18676749176334*cos(3*pi*r/6.25) + 1.18378856160242*sin(3*pi*r/6.25) + 2.67345862686070*cos(4*pi*r/6.25) + 4.61270031338052*sin(4*pi*r/6.25) + -0.624010282050711*cos(5*pi*r/6.25) + -2.30947933595123*sin(5*pi*r/6.25) + -0.00499704036558960*cos(6*pi*r/6.25) + -1.98825500121831*sin(6*pi*r/6.25) + -0.567769364386578*cos(7*pi*r/6.25) + 2.14407142826691*sin(7*pi*r/6.25) + -0.208911401661469*cos(8*pi*r/6.25) + 0.364661795995463*sin(8*pi*r/6.25) + 1.24792956398212*cos(9*pi*r/6.25) + -1.25737438209255*sin(9*pi*r/6.25) + -0.425655290074644*cos(10*pi*r/6.25) + 0.248135281107620*sin(10*pi*r/6.25) + -1.10827972961288*cos(11*pi*r/6.25) + 0.302442685888456*sin(11*pi*r/6.25) + 0.955943748197225*cos(12*pi*r/6.25) + -0.00480513783977559*sin(12*pi*r/6.25) + 0.450971289521115*cos(13*pi*r/6.25) + 0.118209156777299*sin(13*pi*r/6.25) + -0.901674376668601*cos(14*pi*r/6.25) + -0.513555394125542*sin(14*pi*r/6.25) + 0.100456861286574*cos(15*pi*r/6.25) + 0.0992023489615247*sin(15*pi*r/6.25) + 0.414420463679552*cos(16*pi*r/6.25) + 0.706814733019746*sin(16*pi*r/6.25) + -0.148309583106527*cos(17*pi*r/6.25) + -0.538141048570596*sin(17*pi*r/6.25) + -0.00317106904210337*cos(18*pi*r/6.25) + -0.420568124317691*sin(18*pi*r/6.25) + -0.181383863405304*cos(19*pi*r/6.25) + 0.699144012635834*sin(19*pi*r/6.25) + 0.00909514251656242*cos(20*pi*r/6.25) + -0.0160625250457007*sin(20*pi*r/6.25) + 0.447655310812704*cos(21*pi*r/6.25) + -0.455600973008354*sin(21*pi*r/6.25) + -0.318108326057060*cos(22*pi*r/6.25) + 0.187589581072771*sin(22*pi*r/6.25) + -0.361365454611895*cos(23*pi*r/6.25) + 0.100568787255787*sin(23*pi*r/6.25) + 0.545988607485067*cos(24*pi*r/6.25) + -0.00548906107241201*sin(24*pi*r/6.25) + 0.0368154671113208*cos(25*pi*r/6.25) + 0.00945260534074172*sin(25*pi*r/6.25) + -0.456176257437127*cos(26*pi*r/6.25) + -0.256790418990049*sin(26*pi*r/6.25) + 0.185921035181936*cos(27*pi*r/6.25) + 0.181762455560242*sin(27*pi*r/6.25) + 0.172234968821567*cos(28*pi*r/6.25) + 0.290399931696611*sin(28*pi*r/6.25) + -0.117101266072591*cos(29*pi*r/6.25) + -0.416712695407668*sin(29*pi*r/6.25) + -0.000858625856005330*cos(30*pi*r/6.25) + -0.0683236779836320*sin(30*pi*r/6.25)", 
                    "100-(74.2629376000001 + 40.5962349771641*cos(1*pi*r/6.25) + 10.8595046133818*sin(1*pi*r/6.25) + -17.8534381347552*cos(2*pi*r/6.25) + -10.2877544677051*sin(2*pi*r/6.25) + 1.18676749176334*cos(3*pi*r/6.25) + 1.18378856160242*sin(3*pi*r/6.25) + 2.67345862686070*cos(4*pi*r/6.25) + 4.61270031338052*sin(4*pi*r/6.25) + -0.624010282050711*cos(5*pi*r/6.25) + -2.30947933595123*sin(5*pi*r/6.25) + -0.00499704036558960*cos(6*pi*r/6.25) + -1.98825500121831*sin(6*pi*r/6.25) + -0.567769364386578*cos(7*pi*r/6.25) + 2.14407142826691*sin(7*pi*r/6.25) + -0.208911401661469*cos(8*pi*r/6.25) + 0.364661795995463*sin(8*pi*r/6.25) + 1.24792956398212*cos(9*pi*r/6.25) + -1.25737438209255*sin(9*pi*r/6.25) + -0.425655290074644*cos(10*pi*r/6.25) + 0.248135281107620*sin(10*pi*r/6.25) + -1.10827972961288*cos(11*pi*r/6.25) + 0.302442685888456*sin(11*pi*r/6.25) + 0.955943748197225*cos(12*pi*r/6.25) + -0.00480513783977559*sin(12*pi*r/6.25) + 0.450971289521115*cos(13*pi*r/6.25) + 0.118209156777299*sin(13*pi*r/6.25) + -0.901674376668601*cos(14*pi*r/6.25) + -0.513555394125542*sin(14*pi*r/6.25) + 0.100456861286574*cos(15*pi*r/6.25) + 0.0992023489615247*sin(15*pi*r/6.25) + 0.414420463679552*cos(16*pi*r/6.25) + 0.706814733019746*sin(16*pi*r/6.25) + -0.148309583106527*cos(17*pi*r/6.25) + -0.538141048570596*sin(17*pi*r/6.25) + -0.00317106904210337*cos(18*pi*r/6.25) + -0.420568124317691*sin(18*pi*r/6.25) + -0.181383863405304*cos(19*pi*r/6.25) + 0.699144012635834*sin(19*pi*r/6.25) + 0.00909514251656242*cos(20*pi*r/6.25) + -0.0160625250457007*sin(20*pi*r/6.25) + 0.447655310812704*cos(21*pi*r/6.25) + -0.455600973008354*sin(21*pi*r/6.25) + -0.318108326057060*cos(22*pi*r/6.25) + 0.187589581072771*sin(22*pi*r/6.25) + -0.361365454611895*cos(23*pi*r/6.25) + 0.100568787255787*sin(23*pi*r/6.25) + 0.545988607485067*cos(24*pi*r/6.25) + -0.00548906107241201*sin(24*pi*r/6.25) + 0.0368154671113208*cos(25*pi*r/6.25) + 0.00945260534074172*sin(25*pi*r/6.25) + -0.456176257437127*cos(26*pi*r/6.25) + -0.256790418990049*sin(26*pi*r/6.25) + 0.185921035181936*cos(27*pi*r/6.25) + 0.181762455560242*sin(27*pi*r/6.25) + 0.172234968821567*cos(28*pi*r/6.25) + 0.290399931696611*sin(28*pi*r/6.25) + -0.117101266072591*cos(29*pi*r/6.25) + -0.416712695407668*sin(29*pi*r/6.25) + -0.000858625856005330*cos(30*pi*r/6.25) + -0.0683236779836320*sin(30*pi*r/6.25))"],
                   [red, blue], True)

fgrade.set_child(mesh)

"""
fgrade = pv.FGrade(["54.2634+54.5181*cos(4*pi/44.7159*r)-3.7468*cos(4*pi/44.7159*r) 
                    -5.5992*cos(4*pi/44.7159*r)-1.7626*cos(4*pi/44.7159*r) 
                    +0.4947*cos(4*pi/44.7159*r)+cos(4*pi/44.7159*r) 
                    -10.5307*sin(4*pi/44.7159*r)+1.5035*sin(4*pi/44.7159*r)+ 
                    3.6082*sin(4*pi/44.7159*r)+1.6861*sin(4*pi/44.7159*r) - 
                    0.6977*sin(4*pi/44.7159*r)", 
                    "54.2634-(54.5181*cos(4*pi/44.7159*r)-3.7468*cos(4*pi/44.7159*r) 
                    -5.5992*cos(4*pi/44.7159*r)-1.7626*cos(4*pi/44.7159*r) 
                    +0.4947*cos(4*pi/44.7159*r)+cos(4*pi/44.7159*r) 
                    -10.5307*sin(4*pi/44.7159*r)+1.5035*sin(4*pi/44.7159*r)+ 
                    3.6082*sin(4*pi/44.7159*r)+1.6861*sin(4*pi/44.7159*r) - 
                    0.6977*sin(4*pi/44.7159*r))"],
                   [red, blue], True)
"""

#setting grading as root
root = fgrade