# ── template.py ────────────────────────────────────────────────────────────────
import pyvcad as pv

materials = pv.MaterialDefs("configs/default.json")
red = materials.id("red")
blue = materials.id("blue")
cyan = materials.id("cyan")
gray = materials.id("gray")

# Dimensions of part
mainHeight = 3.5 * 6   # Dr. Mac's: 3.5[mm]
mainD = 25    # Dr. Mac's: 25[mm]

# Importing mesh
mesh = pv.Mesh("examples/Work/MacDesigns/BellowsGradientAssembly.STL", red)
mesh = pv.Translate(-mainD/2, -15.5, -mainD/2, mesh)
mesh = pv.Rotate(90, 0, 0, pv.Vec3(0, 0, 0), mesh)

# === MATERIAL GRADING ===
# Gradient Type: gradient3
#
# Stiff Section Settings: 60% Vero, 40% Agilus
# Soft  Section Settings: 15% Vero, 85% Agilus
# Gradient Start / End:   95% → 85%
# Gradient4 Vero/Agilus:  20% / 80%
#
# N (number of Fourier modes) = 80,  L = 15
#

# Use the computed Fourier‐series strings in the call below:
fgrade = pv.FGrade(
    [
        "0.7877777778 -0.0229835004 * cos(1*pi ((x^2 + y^2)^0.5)/15) +0.2489787474 * cos(2*pi ((x^2 + y^2)^0.5)/15) +0.0312758957 * cos(3*pi ((x^2 + y^2)^0.5)/15) -0.1200770561 * cos(4*pi ((x^2 + y^2)^0.5)/15) -0.0129549977 * cos(5*pi ((x^2 + y^2)^0.5)/15) +0.0351078270 * cos(6*pi ((x^2 + y^2)^0.5)/15) +0.0044912118 * cos(7*pi ((x^2 + y^2)^0.5)/15) +0.0062460529 * cos(8*pi ((x^2 + y^2)^0.5)/15) +0.0044795544 * cos(9*pi ((x^2 + y^2)^0.5)/15) -0.0138508338 * cos(10*pi ((x^2 + y^2)^0.5)/15) -0.0071674606 * cos(11*pi ((x^2 + y^2)^0.5)/15) +0.0060349375 * cos(12*pi ((x^2 + y^2)^0.5)/15) +0.0015929497 * cos(13*pi ((x^2 + y^2)^0.5)/15) +0.0025769082 * cos(14*pi ((x^2 + y^2)^0.5)/15) +0.0040323663 * cos(15*pi ((x^2 + y^2)^0.5)/15) -0.0044779783 * cos(16*pi ((x^2 + y^2)^0.5)/15) -0.0038135757 * cos(17*pi ((x^2 + y^2)^0.5)/15) +0.0011948347 * cos(18*pi ((x^2 + y^2)^0.5)/15) -0.0001724551 * cos(19*pi ((x^2 + y^2)^0.5)/15) +0.0014972376 * cos(20*pi ((x^2 + y^2)^0.5)/15) +0.0029634491 * cos(21*pi ((x^2 + y^2)^0.5)/15) -0.0012987553 * cos(22*pi ((x^2 + y^2)^0.5)/15) -0.0020715900 * cos(23*pi ((x^2 + y^2)^0.5)/15) +0.0000178818 * cos(24*pi ((x^2 + y^2)^0.5)/15) -0.0008276190 * cos(25*pi ((x^2 + y^2)^0.5)/15) +0.0004954754 * cos(26*pi ((x^2 + y^2)^0.5)/15) +0.0022055508 * cos(27*pi ((x^2 + y^2)^0.5)/15) -0.0001642397 * cos(28*pi ((x^2 + y^2)^0.5)/15) -0.0008983208 * cos(29*pi ((x^2 + y^2)^0.5)/15) -0.0001200844 * cos(30*pi ((x^2 + y^2)^0.5)/15) -0.0010391857 * cos(31*pi ((x^2 + y^2)^0.5)/15) -0.0000916614 * cos(32*pi ((x^2 + y^2)^0.5)/15) +0.0014119817 * cos(33*pi ((x^2 + y^2)^0.5)/15) +0.0002664722 * cos(34*pi ((x^2 + y^2)^0.5)/15) -0.0002243037 * cos(35*pi ((x^2 + y^2)^0.5)/15) +0.0000668611 * cos(36*pi ((x^2 + y^2)^0.5)/15) -0.0009160492 * cos(37*pi ((x^2 + y^2)^0.5)/15) -0.0004493921 * cos(38*pi ((x^2 + y^2)^0.5)/15) +0.0008087054 * cos(39*pi ((x^2 + y^2)^0.5)/15) +0.0002664879 * cos(40*pi ((x^2 + y^2)^0.5)/15) +0.0001299061 * cos(41*pi ((x^2 + y^2)^0.5)/15) +0.0002994985 * cos(42*pi ((x^2 + y^2)^0.5)/15) -0.0006649676 * cos(43*pi ((x^2 + y^2)^0.5)/15) -0.0005392707 * cos(44*pi ((x^2 + y^2)^0.5)/15) +0.0003455462 * cos(45*pi ((x^2 + y^2)^0.5)/15) +0.0001244233 * cos(46*pi ((x^2 + y^2)^0.5)/15) +0.0002216159 * cos(47*pi ((x^2 + y^2)^0.5)/15) +0.0004576134 * cos(48*pi ((x^2 + y^2)^0.5)/15) -0.0003682788 * cos(49*pi ((x^2 + y^2)^0.5)/15) -0.0004822354 * cos(50*pi ((x^2 + y^2)^0.5)/15) +0.0000867885 * cos(51*pi ((x^2 + y^2)^0.5)/15) -0.0000697466 * cos(52*pi ((x^2 + y^2)^0.5)/15) +0.0001677093 * cos(53*pi ((x^2 + y^2)^0.5)/15) +0.0005032535 * cos(54*pi ((x^2 + y^2)^0.5)/15) -0.0001257953 * cos(55*pi ((x^2 + y^2)^0.5)/15) -0.0003222605 * cos(56*pi ((x^2 + y^2)^0.5)/15) -0.0000259428 * cos(57*pi ((x^2 + y^2)^0.5)/15) -0.0002074707 * cos(58*pi ((x^2 + y^2)^0.5)/15) +0.0000379463 * cos(59*pi ((x^2 + y^2)^0.5)/15) +0.0004475872 * cos(60*pi ((x^2 + y^2)^0.5)/15) +0.0000341324 * cos(61*pi ((x^2 + y^2)^0.5)/15) -0.0001531350 * cos(62*pi ((x^2 + y^2)^0.5)/15) -0.0000124597 * cos(63*pi ((x^2 + y^2)^0.5)/15) -0.0002745207 * cos(64*pi ((x^2 + y^2)^0.5)/15) -0.0000880034 * cos(65*pi ((x^2 + y^2)^0.5)/15) +0.0003283903 * cos(66*pi ((x^2 + y^2)^0.5)/15) +0.0000932596 * cos(67*pi ((x^2 + y^2)^0.5)/15) -0.0000108480 * cos(68*pi ((x^2 + y^2)^0.5)/15) +0.0000549263 * cos(69*pi ((x^2 + y^2)^0.5)/15) -0.0002565047 * cos(70*pi ((x^2 + y^2)^0.5)/15) -0.0001743657 * cos(71*pi ((x^2 + y^2)^0.5)/15) +0.0001914682 * cos(72*pi ((x^2 + y^2)^0.5)/15) +0.0000771387 * cos(73*pi ((x^2 + y^2)^0.5)/15) +0.0000647862 * cos(74*pi ((x^2 + y^2)^0.5)/15) +0.0001391558 * cos(75*pi ((x^2 + y^2)^0.5)/15) -0.0001882126 * cos(76*pi ((x^2 + y^2)^0.5)/15) -0.0001978866 * cos(77*pi ((x^2 + y^2)^0.5)/15) +0.0000761261 * cos(78*pi ((x^2 + y^2)^0.5)/15) +0.0000133611 * cos(79*pi ((x^2 + y^2)^0.5)/15) +0.0000800997 * cos(80*pi ((x^2 + y^2)^0.5)/15)",
        "0.2122222222 +0.0229835004 * cos(1*pi ((x^2 + y^2)^0.5)/15) -0.2489787474 * cos(2*pi ((x^2 + y^2)^0.5)/15) -0.0312758957 * cos(3*pi ((x^2 + y^2)^0.5)/15) +0.1200770561 * cos(4*pi ((x^2 + y^2)^0.5)/15) +0.0129549977 * cos(5*pi ((x^2 + y^2)^0.5)/15) -0.0351078270 * cos(6*pi ((x^2 + y^2)^0.5)/15) -0.0044912118 * cos(7*pi ((x^2 + y^2)^0.5)/15) -0.0062460529 * cos(8*pi ((x^2 + y^2)^0.5)/15) -0.0044795544 * cos(9*pi ((x^2 + y^2)^0.5)/15) +0.0138508338 * cos(10*pi ((x^2 + y^2)^0.5)/15) +0.0071674606 * cos(11*pi ((x^2 + y^2)^0.5)/15) -0.0060349375 * cos(12*pi ((x^2 + y^2)^0.5)/15) -0.0015929497 * cos(13*pi ((x^2 + y^2)^0.5)/15) -0.0025769082 * cos(14*pi ((x^2 + y^2)^0.5)/15) -0.0040323663 * cos(15*pi ((x^2 + y^2)^0.5)/15) +0.0044779783 * cos(16*pi ((x^2 + y^2)^0.5)/15) +0.0038135757 * cos(17*pi ((x^2 + y^2)^0.5)/15) -0.0011948347 * cos(18*pi ((x^2 + y^2)^0.5)/15) +0.0001724551 * cos(19*pi ((x^2 + y^2)^0.5)/15) -0.0014972376 * cos(20*pi ((x^2 + y^2)^0.5)/15) -0.0029634491 * cos(21*pi ((x^2 + y^2)^0.5)/15) +0.0012987553 * cos(22*pi ((x^2 + y^2)^0.5)/15) +0.0020715900 * cos(23*pi ((x^2 + y^2)^0.5)/15) -0.0000178818 * cos(24*pi ((x^2 + y^2)^0.5)/15) +0.0008276190 * cos(25*pi ((x^2 + y^2)^0.5)/15) -0.0004954754 * cos(26*pi ((x^2 + y^2)^0.5)/15) -0.0022055508 * cos(27*pi ((x^2 + y^2)^0.5)/15) +0.0001642397 * cos(28*pi ((x^2 + y^2)^0.5)/15) +0.0008983208 * cos(29*pi ((x^2 + y^2)^0.5)/15) +0.0001200844 * cos(30*pi ((x^2 + y^2)^0.5)/15) +0.0010391857 * cos(31*pi ((x^2 + y^2)^0.5)/15) +0.0000916614 * cos(32*pi ((x^2 + y^2)^0.5)/15) -0.0014119817 * cos(33*pi ((x^2 + y^2)^0.5)/15) -0.0002664722 * cos(34*pi ((x^2 + y^2)^0.5)/15) +0.0002243037 * cos(35*pi ((x^2 + y^2)^0.5)/15) -0.0000668611 * cos(36*pi ((x^2 + y^2)^0.5)/15) +0.0009160492 * cos(37*pi ((x^2 + y^2)^0.5)/15) +0.0004493921 * cos(38*pi ((x^2 + y^2)^0.5)/15) -0.0008087054 * cos(39*pi ((x^2 + y^2)^0.5)/15) -0.0002664879 * cos(40*pi ((x^2 + y^2)^0.5)/15) -0.0001299061 * cos(41*pi ((x^2 + y^2)^0.5)/15) -0.0002994985 * cos(42*pi ((x^2 + y^2)^0.5)/15) +0.0006649676 * cos(43*pi ((x^2 + y^2)^0.5)/15) +0.0005392707 * cos(44*pi ((x^2 + y^2)^0.5)/15) -0.0003455462 * cos(45*pi ((x^2 + y^2)^0.5)/15) -0.0001244233 * cos(46*pi ((x^2 + y^2)^0.5)/15) -0.0002216159 * cos(47*pi ((x^2 + y^2)^0.5)/15) -0.0004576134 * cos(48*pi ((x^2 + y^2)^0.5)/15) +0.0003682788 * cos(49*pi ((x^2 + y^2)^0.5)/15) +0.0004822354 * cos(50*pi ((x^2 + y^2)^0.5)/15) -0.0000867885 * cos(51*pi ((x^2 + y^2)^0.5)/15) +0.0000697466 * cos(52*pi ((x^2 + y^2)^0.5)/15) -0.0001677093 * cos(53*pi ((x^2 + y^2)^0.5)/15) -0.0005032535 * cos(54*pi ((x^2 + y^2)^0.5)/15) +0.0001257953 * cos(55*pi ((x^2 + y^2)^0.5)/15) +0.0003222605 * cos(56*pi ((x^2 + y^2)^0.5)/15) +0.0000259428 * cos(57*pi ((x^2 + y^2)^0.5)/15) +0.0002074707 * cos(58*pi ((x^2 + y^2)^0.5)/15) -0.0000379463 * cos(59*pi ((x^2 + y^2)^0.5)/15) -0.0004475872 * cos(60*pi ((x^2 + y^2)^0.5)/15) -0.0000341324 * cos(61*pi ((x^2 + y^2)^0.5)/15) +0.0001531350 * cos(62*pi ((x^2 + y^2)^0.5)/15) +0.0000124597 * cos(63*pi ((x^2 + y^2)^0.5)/15) +0.0002745207 * cos(64*pi ((x^2 + y^2)^0.5)/15) +0.0000880034 * cos(65*pi ((x^2 + y^2)^0.5)/15) -0.0003283903 * cos(66*pi ((x^2 + y^2)^0.5)/15) -0.0000932596 * cos(67*pi ((x^2 + y^2)^0.5)/15) +0.0000108480 * cos(68*pi ((x^2 + y^2)^0.5)/15) -0.0000549263 * cos(69*pi ((x^2 + y^2)^0.5)/15) +0.0002565047 * cos(70*pi ((x^2 + y^2)^0.5)/15) +0.0001743657 * cos(71*pi ((x^2 + y^2)^0.5)/15) -0.0001914682 * cos(72*pi ((x^2 + y^2)^0.5)/15) -0.0000771387 * cos(73*pi ((x^2 + y^2)^0.5)/15) -0.0000647862 * cos(74*pi ((x^2 + y^2)^0.5)/15) -0.0001391558 * cos(75*pi ((x^2 + y^2)^0.5)/15) +0.0001882126 * cos(76*pi ((x^2 + y^2)^0.5)/15) +0.0001978866 * cos(77*pi ((x^2 + y^2)^0.5)/15) -0.0000761261 * cos(78*pi ((x^2 + y^2)^0.5)/15) -0.0000133611 * cos(79*pi ((x^2 + y^2)^0.5)/15) -0.0000800997 * cos(80*pi ((x^2 + y^2)^0.5)/15)"
    ],
    [red, blue],
    True
)

fgrade.set_child(mesh)

#Importing liquid part of the bellows structure
#Liquid diameter
liquid_diameter = 19.66050711

liquid_mesh = pv.Mesh("examples/Work/MacDesigns/LiquidAssembly.STL", cyan)
liquid_mesh = pv.Translate(-liquid_diameter/2, -mainHeight/2, -liquid_diameter/2, liquid_mesh)
liquid_mesh = pv.Rotate(90, 0, 0, pv.Vec3(0, 0, 0), liquid_mesh)

#Importing caps material: gray
cap_diameter = 8
cap_mesh = pv.Mesh("examples/Work/MacDesigns/CloseCap.STL", gray)
cap_mesh = pv.Translate(-cap_diameter/2, -cap_diameter/2, -11.5, cap_mesh)
#2nd cap
cap2_mesh = pv.Mesh("examples/Work/MacDesigns/CloseCap.STL", gray)
cap2_mesh = pv.Translate(-cap_diameter/2, -cap_diameter/2, 10.5, cap2_mesh)

union1 = pv.Union()
union1.add_child(fgrade)
union1.add_child(liquid_mesh)
union1.add_child(cap_mesh)
union1.add_child(cap2_mesh)

# setting grading as root
root = union1
